<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gráfico — Faixa etária de players de Clash Royale</title>
<style>

    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#60a5fa}

    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0; background:linear-gradient(180deg,#071028 0%, #071827 100%); color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}

    .wrap{max-width:980px;width:100%;background:rgba(255,255,255,0.03);border-radius:12px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}

    header{display:flex;gap:16px;align-items:center;justify-content:space-between}

    h1{font-size:18px;margin:0}

    p.lead{margin:6px 0 0;color:var(--muted);font-size:13px}

    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}

    .card{background:rgba(255,255,255,0.02);padding:12px;border-radius:8px;min-width:220px}

    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}

    input[type=number]{width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}

    .actions{display:flex;gap:8px;align-items:center}

    button{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;background:var(--accent);color:#04233a;font-weight:600}

    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    .chart-wrap{margin-top:18px}

    @media (max-width:720px){.controls{flex-direction:column}.card{width:100%}}

    #ageChart {
  background: rgba(255,255,255,0.02);
  border: 2px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  padding: 12px;
}
</style>
</head>
<body>
<div class="wrap">
<header>
<div>
<h1>Gráfico de faixa etária — Players de Clash Royale</h1>
<p class="lead">Exemplo interativo em HTML + Chart.js. Edite os valores e baixe imagem/CSV.</p>
</div>
<div class="actions">
<button id="downloadPng">Baixar PNG</button>
<button id="downloadCsv" class="secondary">Baixar CSV</button>
</div>
</header>
 
    <div class="controls">
<div class="card">
<label>Faixas (ordem fixa)</label>
<div style="display:grid;gap:8px">
<small style="color:var(--muted)">0–12</small>
<input type="number" min="0" id="v0" value="1200" />
 
          <small style="color:var(--muted)">13–17</small>
<input type="number" min="0" id="v1" value="2200" />
 
          <small style="color:var(--muted)">18–24</small>
<input type="number" min="0" id="v2" value="5400" />
 
          <small style="color:var(--muted)">25–34</small>
<input type="number" min="0" id="v3" value="3000" />
 
          <small style="color:var(--muted)">35–44</small>
<input type="number" min="0" id="v4" value="700" />
 
          <small style="color:var(--muted)">45+</small>
<input type="number" min="0" id="v5" value="150" />
 
          <button id="update" style="margin-top:8px">Atualizar gráfico</button>
</div>
</div>
 
      <div class="card" style="flex:1">
<label>Configurações</label>
<div style="display:flex;gap:8px;align-items:center">
<label style="min-width:120px">Tipo</label>
<select id="chartType">
<option value="bar">Barra vertical</option>
<option value="horizontalBar">Barra horizontal</option>
<option value="pie">Pizza</option>
<option value="doughnut">Rosca</option>
</select>
</div>
<p style="color:var(--muted);font-size:13px;margin-top:10px">Obs.: valores de exemplo. Substitua pelos seus dados reais.</p>
</div>
</div>
 
    <div class="chart-wrap">
<canvas id="ageChart" height="120"></canvas>
</div>
</div>
 
  <!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script>

    // Labels para as faixas etárias

    const labels = ['0–12','13–17','18–24','25–34','35–44','45+'];
 
    // Função para coletar valores do formulário

    function readValues(){

      return [

        +document.getElementById('v0').value || 0,

        +document.getElementById('v1').value || 0,

        +document.getElementById('v2').value || 0,

        +document.getElementById('v3').value || 0,

        +document.getElementById('v4').value || 0,

        +document.getElementById('v5').value || 0

      ];

    }
 
    // Configuração inicial

    const ctx = document.getElementById('ageChart').getContext('2d');

    let chartConfig = {

      type: 'bar',

      data: {

        labels: labels,

        datasets: [{

          label: 'Número de players',

          data: readValues(),

          borderRadius: 8,

          barThickness: 30,

          backgroundColor: 'rgba(96,165,250,0.9)',

          hoverBackgroundColor: 'rgba(96,165,250,1)'

        }]

      },

      options: {

        responsive: true,

        maintainAspectRatio: false,

        plugins: {

          legend: { display: false },

          tooltip: { callbacks: { label: ctx => `${ctx.dataset.label}: ${ctx.formattedValue}` } }

        },

        scales: {

          x: { title: { display: true, text: 'Faixa etária' } },

          y: { title: { display: true, text: 'Quantidade' }, beginAtZero: true }

        }

      }

    };
 
    let chart = new Chart(ctx, chartConfig);
 
    // Atualiza o gráfico com novos dados/tipo

    function updateChart(){

      const values = readValues();

      const selectedType = document.getElementById('chartType').value;
 
      // Para Chart.js v4, 'horizontalBar' não é mais um tipo nativo — simulamos trocando orientação

      if (selectedType === 'horizontalBar'){

        chartConfig.type = 'bar';

        chartConfig.options.indexAxis = 'y';

      } else {

        chartConfig.options.indexAxis = undefined;

        chartConfig.type = selectedType;

      }
 
      chartConfig.data.datasets[0].data = values;

      // Atualizar cores para pizza/rosca (opcional)

      if (selectedType === 'pie' || selectedType === 'doughnut'){

        chartConfig.data.datasets[0].backgroundColor = labels.map((_,i)=>`hsl(${i*40},70%,60%)`);

      } else {

        chartConfig.data.datasets[0].backgroundColor = 'rgba(96,165,250,0.9)';

      }
 
      chart.destroy();

      chart = new Chart(ctx, chartConfig);

    }
 
    document.getElementById('update').addEventListener('click', updateChart);
 
    // Download PNG

    document.getElementById('downloadPng').addEventListener('click', ()=>{

      const a = document.createElement('a');

      a.href = document.getElementById('ageChart').toDataURL('image/png');

      a.download = 'faixa-etaria-clash-royale.png';

      a.click();

    });
 
    // Download CSV

    document.getElementById('downloadCsv').addEventListener('click', ()=>{

      const values = readValues();

      const rows = ['faixa;valor', ...labels.map((lab,i)=>`${lab};${values[i]}`)];

      const blob = new Blob([rows.join('\n')], {type: 'text/csv;charset=utf-8;'});

      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');

      a.href = url;

      a.download = 'faixa-etaria-clash-royale.csv';

      a.click();

      URL.revokeObjectURL(url);

    });
 
    // Inicializa

    updateChart();
</script>
</body>
</html>

 